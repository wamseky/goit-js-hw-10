{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst stopTimer = (selectedDate, intervalID) => {\n  if (selectedDate < Date.now() + 400) {\n    clearInterval(intervalID);\n    intervalID = null;\n  }\n}\n\nconst convertMs = (ms) => {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return initTimer(days, hours, minutes, seconds);\n}\n\nconst initTimer = (days, hours, minutes, seconds) => {\n  const daysTarget = document.querySelector('[data-days]');\n  const hoursTarget = document.querySelector('[data-hours]');\n  const minutesTarget = document.querySelector('[data-minutes]');\n  const secondsTarget = document.querySelector('[data-seconds]');\n\n  daysTarget.textContent = days.toString().padStart(2, '0');\n  hoursTarget.textContent = hours.toString().padStart(2, '0');\n  minutesTarget.textContent = minutes.toString().padStart(2, '0');\n  secondsTarget.textContent = seconds.toString().padStart(2, '0');\n}\n\nconst errorMessage = () => {\n  iziToast.error({\n    class: 'popup-message',\n    theme: 'dark',\n    backgroundColor: '#ef4040',\n    messageColor: '#fff',\n    position: 'topRight',\n    pauseOnHover: true,\n    timeout: 3000,\n    message: 'Please choose a date in the future'\n  });\n}\n\nconst mobileInputAttrs = (state) => {\n  const input = document.querySelector('.flatpickr-input.flatpickr-mobile');\n\n  if (!input) {\n    return;\n  }\n\n  state ? input.setAttribute('disabled', '') : input.removeAttribute('disabled');\n}\n\nconst timerHandler = (selectedDate, input, trigger) => {\n  trigger.removeAttribute('disabled');\n  input.removeAttribute('disabled');\n  mobileInputAttrs(false);\n  let intervalID;\n\n  trigger.addEventListener('click', () => {\n    trigger.setAttribute('disabled', '');\n    input.setAttribute('disabled', '');\n    mobileInputAttrs(true);\n\n    intervalID = setInterval(() => {\n      convertMs(selectedDate - Date.now());\n      stopTimer(selectedDate, intervalID);\n    }, 200)\n  });\n}\n\nconst initInputTimer = () => {\n  const input = document.querySelector('#datetime-picker');\n  const trigger = document.querySelector('[data-start]');\n  let userSelectedDate;\n\n  if (!input || !trigger) {\n    return;\n  }\n\n  trigger.setAttribute('disabled', '');\n\n  const options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    dateFormat: 'Y-m-d h:m',\n    onClose(selectedDates) {\n      userSelectedDate = selectedDates[0];\n      if (userSelectedDate <= Date.now() || isNaN(userSelectedDate)) {\n        trigger.setAttribute('disabled', '');\n        errorMessage();\n      } else {\n        timerHandler(userSelectedDate, input, trigger);\n      }\n    }\n  };\n\n  flatpickr(input, options);\n}\n\ninitInputTimer();"],"names":["stopTimer","selectedDate","intervalID","convertMs","ms","days","hours","minutes","seconds","initTimer","daysTarget","hoursTarget","minutesTarget","secondsTarget","errorMessage","iziToast","mobileInputAttrs","state","input","timerHandler","trigger","initInputTimer","userSelectedDate","flatpickr","selectedDates"],"mappings":"2FAMA,MAAMA,EAAY,CAACC,EAAcC,IAAe,CAC1CD,EAAe,KAAK,IAAG,EAAK,MAC9B,cAAcC,CAAU,EACxBA,EAAa,KAEjB,EAEMC,EAAaC,GAAO,CAMxB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,OAAOK,EAAUJ,EAAMC,EAAOC,EAASC,CAAO,CAChD,EAEMC,EAAY,CAACJ,EAAMC,EAAOC,EAASC,IAAY,CACnD,MAAME,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAgB,SAAS,cAAc,gBAAgB,EACvDC,EAAgB,SAAS,cAAc,gBAAgB,EAE7DH,EAAW,YAAcL,EAAK,SAAU,EAAC,SAAS,EAAG,GAAG,EACxDM,EAAY,YAAcL,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,EAC1DM,EAAc,YAAcL,EAAQ,SAAU,EAAC,SAAS,EAAG,GAAG,EAC9DM,EAAc,YAAcL,EAAQ,SAAU,EAAC,SAAS,EAAG,GAAG,CAChE,EAEMM,EAAe,IAAM,CACzBC,EAAS,MAAM,CACb,MAAO,gBACP,MAAO,OACP,gBAAiB,UACjB,aAAc,OACd,SAAU,WACV,aAAc,GACd,QAAS,IACT,QAAS,oCACb,CAAG,CACH,EAEMC,EAAoBC,GAAU,CAClC,MAAMC,EAAQ,SAAS,cAAc,mCAAmC,EAEnEA,IAILD,EAAQC,EAAM,aAAa,WAAY,EAAE,EAAIA,EAAM,gBAAgB,UAAU,EAC/E,EAEMC,EAAe,CAAClB,EAAciB,EAAOE,IAAY,CACrDA,EAAQ,gBAAgB,UAAU,EAClCF,EAAM,gBAAgB,UAAU,EAChCF,EAAiB,EAAK,EACtB,IAAId,EAEJkB,EAAQ,iBAAiB,QAAS,IAAM,CACtCA,EAAQ,aAAa,WAAY,EAAE,EACnCF,EAAM,aAAa,WAAY,EAAE,EACjCF,EAAiB,EAAI,EAErBd,EAAa,YAAY,IAAM,CAC7BC,EAAUF,EAAe,KAAK,IAAK,CAAA,EACnCD,EAAUC,EAAcC,CAAU,CACnC,EAAE,GAAG,CACV,CAAG,CACH,EAEMmB,EAAiB,IAAM,CAC3B,MAAMH,EAAQ,SAAS,cAAc,kBAAkB,EACjDE,EAAU,SAAS,cAAc,cAAc,EACrD,IAAIE,EAEJ,GAAI,CAACJ,GAAS,CAACE,EACb,OAGFA,EAAQ,aAAa,WAAY,EAAE,EAmBnCG,EAAUL,EAjBM,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,WAAY,YACZ,QAAQM,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAC9BF,GAAoB,KAAK,IAAK,GAAI,MAAMA,CAAgB,GAC1DF,EAAQ,aAAa,WAAY,EAAE,EACnCN,KAEAK,EAAaG,EAAkBJ,EAAOE,CAAO,CAEhD,CACL,CAE0B,CAC1B,EAEAC,EAAgB"}